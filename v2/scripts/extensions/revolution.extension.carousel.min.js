!function(){var a=jQuery.fn.revolution,e,f,b,c,d,g,h;jQuery.extend(!0,a,{prepareCarousel:function(d,g,e){e=d.carousel.lastdirection=b(e,d.carousel.lastdirection),f(d),d.carousel.slide_offset_target=h(d),void 0==g?a.carouselToEvalPosition(d,e):c(d,e,!1)},carouselToEvalPosition:function(g,e){var d=g.carousel,j,f,i,h,k,l;e=d.lastdirection=b(e,d.lastdirection),j="center"===d.horizontal_align?(d.wrapwidth/2-d.slide_width/2-d.slide_globaloffset)/d.slide_width:(0-d.slide_globaloffset)/d.slide_width,f=a.simp(j,g.slideamount,!1),i=f-Math.floor(f),h=0,k=-1*(Math.ceil(f)-f),l=-1*(Math.floor(f)-f),h=i>=.3&&"left"===e||i>=.7&&"right"===e?k:.3>i&&"left"===e||.7>i&&"right"===e?l:h,h="off"===d.infinity?0>f?f:j>g.slideamount-1?j-(g.slideamount-1):h:h,d.slide_offset_target=h*d.slide_width,0!==Math.abs(d.slide_offset_target)?c(g,e,!0):a.organiseCarousel(g,e)},organiseCarousel:function(d,b,j,k){var a,f,g,i,e,c,h;b=void 0===b||"down"==b||"up"==b||null===b||jQuery.isEmptyObject(b)?"left":b;for(a=d.carousel,f=new Array,g=a.slides.length,i="right"===a.horizontal_align?i=d.width:0,e=0;g>e;e++)c=e*a.slide_width+a.slide_offset,"on"===a.infinity&&(c=c>a.wrapwidth-a.inneroffset&&"right"==b?a.slide_offset-(a.slides.length-e)*a.slide_width:c,c=c<0-a.inneroffset-a.slide_width&&"left"==b?c+a.maxwidth:c),f[e]=c;h=999,a.slides&&jQuery.each(a.slides,function(l,n){var i=f[l],c,e,k,m;if("on"===a.infinity&&(i=i>a.wrapwidth-a.inneroffset&&"left"===b?f[0]-(g-l)*a.slide_width:i,i=i<0-a.inneroffset-a.slide_width?"left"==b?i+a.maxwidth:"right"===b?f[g-1]+(l+1)*a.slide_width:i:i),c=new Object,c.left=i+a.inneroffset,e="center"===a.horizontal_align?(Math.abs(a.wrapwidth/2)-(c.left+a.slide_width/2))/a.slide_width:(a.inneroffset-c.left)/a.slide_width,k="center"===a.horizontal_align?2:1,(j&&Math.abs(e)<h||0===e)&&(h=Math.abs(e),a.focused=l),c.width=a.slide_width,c.x=0,c.transformPerspective=1200,c.transformOrigin="50% "+a.vertical_align,"on"===a.fadeout)if("on"===a.vary_fade)c.autoAlpha=1-Math.abs(1/Math.ceil(a.maxVisibleItems/k)*e);else switch(a.horizontal_align){case"center":c.autoAlpha=Math.abs(e)<Math.ceil(a.maxVisibleItems/k-1)?1:1-(Math.abs(e)-Math.floor(Math.abs(e)));break;case"left":c.autoAlpha=1>e&&e>0?1-e:Math.abs(e)>a.maxVisibleItems-1?1-(Math.abs(e)-(a.maxVisibleItems-1)):1;break;case"right":c.autoAlpha=e>-1&&0>e?1-Math.abs(e):e>a.maxVisibleItems-1?1-(Math.abs(e)-(a.maxVisibleItems-1)):1}else c.autoAlpha=Math.abs(e)<Math.ceil(a.maxVisibleItems/k)?1:0;void 0!==a.minScale&&a.minScale>0&&("on"===a.vary_scale?(c.scale=1-Math.abs(a.minScale/100/Math.ceil(a.maxVisibleItems/k)*e),m=(a.slide_width-a.slide_width*c.scale)*Math.abs(e)):(c.scale=e>=1||-1>=e?1-a.minScale/100:(100-a.minScale*Math.abs(e))/100,m=(a.slide_width-a.slide_width*(1-a.minScale/100))*Math.abs(e))),void 0!==a.maxRotation&&0!=Math.abs(a.maxRotation)&&("on"===a.vary_rotation?(c.rotationY=Math.abs(a.maxRotation)-Math.abs((1-Math.abs(1/Math.ceil(a.maxVisibleItems/k)*e))*a.maxRotation),c.autoAlpha=Math.abs(c.rotationY)>90?0:c.autoAlpha):c.rotationY=e>=1||-1>=e?a.maxRotation:Math.abs(e)*a.maxRotation,c.rotationY=0>e?-1*c.rotationY:c.rotationY),c.x=-1*a.space*e,c.left=Math.floor(c.left),c.x=Math.floor(c.x),void 0!==c.scale?0>e?c.x-m:c.x+m:c.x,c.zIndex=Math.round(100-Math.abs(5*e)),c.transformStyle="3D"!=d.parallax.type&&"3d"!=d.parallax.type?"flat":"preserve-3d",punchgs.TweenLite.set(n,c)}),k&&(d.c.find(".next-revslide").removeClass("next-revslide"),jQuery(a.slides[a.focused]).addClass("next-revslide"),d.c.trigger("revolution.nextslide.waiting")),a.wrapwidth/2-a.slide_offset,a.maxwidth+a.slide_offset-a.wrapwidth/2}}),e=function(b){var a=b.carousel;a.infbackup=a.infinity,a.maxVisiblebackup=a.maxVisibleItems,a.slide_globaloffset="none",a.slide_offset=0,a.wrap=b.c.find(".tp-carousel-wrapper"),a.slides=b.c.find(".tp-revslider-slidesli"),0!==a.maxRotation&&("3D"!=b.parallax.type&&"3d"!=b.parallax.type?punchgs.TweenLite.set(a.wrap,{perspective:1200,transformStyle:"flat"}):punchgs.TweenLite.set(a.wrap,{perspective:1600,transformStyle:"preserve-3d"})),void 0!==a.border_radius&&parseInt(a.border_radius,0)>0&&punchgs.TweenLite.set(b.c.find(".tp-revslider-slidesli"),{borderRadius:a.border_radius})},f=function(c){var b,d,g,f;void 0===c.bw&&a.setSize(c),b=c.carousel,d=a.getHorizontalOffset(c.c,"left"),g=a.getHorizontalOffset(c.c,"right"),void 0===b.wrap&&e(c),b.slide_width="on"!==b.stretch?c.gridwidth[c.curWinRange]*c.bw:c.c.width(),b.maxwidth=c.slideamount*b.slide_width,b.maxVisiblebackup>b.slides.length+1&&(b.maxVisibleItems=b.slides.length+2),b.wrapwidth=b.maxVisibleItems*b.slide_width+(b.maxVisibleItems-1)*b.space,b.wrapwidth="auto"!=c.sliderLayout?b.wrapwidth>c.c.closest(".tp-simpleresponsive").width()?c.c.closest(".tp-simpleresponsive").width():b.wrapwidth:b.wrapwidth>c.ul.width()?c.ul.width():b.wrapwidth,b.infinity=b.wrapwidth>=b.maxwidth?"off":b.infbackup,b.wrapoffset="center"===b.horizontal_align?(c.c.width()-g-d-b.wrapwidth)/2:0,b.wrapoffset="auto"!=c.sliderLayout&&c.outernav?0:b.wrapoffset<d?d:b.wrapoffset,f="hidden",("3D"==c.parallax.type||"3d"==c.parallax.type)&&(f="visible"),"right"===b.horizontal_align?punchgs.TweenLite.set(b.wrap,{left:"auto",right:b.wrapoffset+"px",width:b.wrapwidth,overflow:f}):punchgs.TweenLite.set(b.wrap,{right:"auto",left:b.wrapoffset+"px",width:b.wrapwidth,overflow:f}),b.inneroffset="right"===b.horizontal_align?b.wrapwidth-b.slide_width:0,b.realoffset=Math.abs(b.wrap.position().left),b.windhalf=jQuery(window).width()/2},b=function(a,b){return null===a||jQuery.isEmptyObject(a)?b:void 0===a?"right":a},c=function(d,f,g){var c=d.carousel,e;f=c.lastdirection=b(f,c.lastdirection),e=new Object,e.from=0,e.to=c.slide_offset_target,void 0!==c.positionanim&&c.positionanim.pause(),c.positionanim=punchgs.TweenLite.to(e,1.2,{from:e.to,onUpdate:function(){c.slide_offset=c.slide_globaloffset+e.from,c.slide_offset=a.simp(c.slide_offset,c.maxwidth),a.organiseCarousel(d,f,!1,!1)},onComplete:function(){c.slide_globaloffset="off"===c.infinity?c.slide_globaloffset+c.slide_offset_target:a.simp(c.slide_globaloffset+c.slide_offset_target,c.maxwidth),c.slide_offset=a.simp(c.slide_offset,c.maxwidth),a.organiseCarousel(d,f,!1,!0);var b=jQuery(d.li[c.focused]);d.c.find(".next-revslide").removeClass("next-revslide"),g&&a.callingNewSlide(d,d.c,b.data("index"))},ease:punchgs.Expo.easeOut})},d=function(a,b){return Math.abs(a)>Math.abs(b)?a>0?a-Math.abs(Math.floor(a/b)*b):a+Math.abs(Math.floor(a/b)*b):a},g=function(e,f,a){var a,a,b=f-e,c=f-a-e;return b=d(b,a),c=d(c,a),Math.abs(b)>Math.abs(c)?c:b},h=function(d){var e=0,b=d.carousel,c,f;return void 0!==b.positionanim&&b.positionanim.kill(),"none"==b.slide_globaloffset?b.slide_globaloffset=e="center"===b.horizontal_align?b.wrapwidth/2-b.slide_width/2:0:(b.slide_globaloffset=b.slide_offset,b.slide_offset=0,c=d.c.find(".processing-revslide").index(),f="center"===b.horizontal_align?(b.wrapwidth/2-b.slide_width/2-b.slide_globaloffset)/b.slide_width:(0-b.slide_globaloffset)/b.slide_width,f=a.simp(f,d.slideamount,!1),c=c>=0?c:d.c.find(".active-revslide").index(),c=c>=0?c:0,e="off"===b.infinity?f-c:-g(f,c,d.slideamount),e*=b.slide_width),e}}(jQuery)