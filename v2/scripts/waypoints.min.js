(function(){var b=[].indexOf||function(b){for(var a=0,c=this.length;a<c;a++)if(a in this&&this[a]===b)return a;return-1},a=[].slice;(function(a,b){return typeof define=="function"&&define.amd?define("waypoints",["jquery"],function(c){return b(c,a)}):b(a.jQuery,a)})(this,function(c,e){var m,s,n,h,t,k,i,q,d,f,o,p,r,l,j,g;return m=c(e),q=b.call(e,"ontouchstart")>=0,h={horizontal:{},vertical:{}},t=1,i={},k="waypoints-context-id",o="resize.waypoints",p="scroll.waypoints",r=1,l="waypoints-waypoint-ids",j="waypoint",g="waypoints",s=function(){function a(a){var b=this;this.$element=a,this.element=a[0],this.didResize=!1,this.didScroll=!1,this.id="context"+t++,this.oldScroll={x:a.scrollLeft(),y:a.scrollTop()},this.waypoints={horizontal:{},vertical:{}},a.data(k,this.id),i[this.id]=this,a.bind(p,function(){var a;if(!(b.didScroll||q))return b.didScroll=!0,a=function(){return b.doScroll(),b.didScroll=!1},e.setTimeout(a,c[g].settings.scrollThrottle)}),a.bind(o,function(){var a;if(!b.didResize)return b.didResize=!0,a=function(){return c[g]("refresh"),b.didResize=!1},e.setTimeout(a,c[g].settings.resizeThrottle)})}return a.prototype.doScroll=function(){var a,b=this;return a={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},q&&(!a.vertical.oldScroll||!a.vertical.newScroll)&&c[g]("refresh"),c.each(a,function(g,a){var f,e,d;return d=[],e=a.newScroll>a.oldScroll,f=e?a.forward:a.backward,c.each(b.waypoints[g],function(f,b){var c,e;if(a.oldScroll<(c=b.offset)&&c<=a.newScroll)return d.push(b);if(a.newScroll<(e=b.offset)&&e<=a.oldScroll)return d.push(b)}),d.sort(function(a,b){return a.offset-b.offset}),e||d.reverse(),c.each(d,function(b,a){if(a.options.continuous||b===d.length-1)return a.trigger([f])})}),this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}},a.prototype.refresh=function(){var d,b,a,e=this;return a=c.isWindow(this.element),b=this.$element.offset(),this.doScroll(),d={horizontal:{contextOffset:a?0:b.left,contextScroll:a?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:a?0:b.top,contextScroll:a?0:this.oldScroll.y,contextDimension:a?c[g]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},c.each(d,function(b,a){return c.each(e.waypoints[b],function(i,b){var d,g,e,h,f;if(d=b.options.offset,e=b.offset,g=c.isWindow(b.element)?0:b.$element.offset()[a.offsetProp],c.isFunction(d)?d=d.apply(b.element):typeof d=="string"&&(d=parseFloat(d),b.options.offset.indexOf("%")>-1&&(d=Math.ceil(a.contextDimension*d/100))),b.offset=g-a.contextOffset+a.contextScroll-d,b.options.onlyOnScroll&&e!=null||!b.enabled)return;if(e!==null&&e<(h=a.oldScroll)&&h<=b.offset)return b.trigger([a.backward]);if(e!==null&&e>(f=a.oldScroll)&&f>=b.offset)return b.trigger([a.forward]);if(e===null&&a.oldScroll>=b.offset)return b.trigger([a.forward])})})},a.prototype.checkEmpty=function(){if(c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([o,p].join(" ")),delete i[this.id]},a}(),n=function(){function a(b,d,a){var e,f;a=c.extend({},c.fn[j].defaults,a),a.offset==="bottom-in-view"&&(a.offset=function(){var a;return a=c[g]("viewportHeight"),c.isWindow(d.element)||(a=d.$element.height()),a-c(this).outerHeight()}),this.$element=b,this.element=b[0],this.axis=a.horizontal?"horizontal":"vertical",this.callback=a.handler,this.context=d,this.enabled=a.enabled,this.id="waypoints"+r++,this.offset=null,this.options=a,d.waypoints[this.axis][this.id]=this,h[this.axis][this.id]=this,e=(f=b.data(l))!=null?f:[],e.push(this.id),b.data(l,e)}return a.prototype.trigger=function(a){if(!this.enabled)return;if(this.callback!=null&&this.callback.apply(this.element,a),this.options.triggerOnce)return this.destroy()},a.prototype.disable=function(){return this.enabled=!1},a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},a.prototype.destroy=function(){return delete h[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},a.getWaypointsByElement=function(d){var b,a;return a=c(d).data(l),!a?[]:(b=c.extend({},h.horizontal,h.vertical),c.map(a,function(a){return b[a]}))},a}(),f={init:function(b,a){var d;return a==null&&(a={}),(d=a.handler)==null&&(a.handler=b),this.each(function(){var e,d,b,f;return e=c(this),b=(f=a.context)!=null?f:c.fn[j].defaults.context,c.isWindow(b)||(b=e.closest(b)),b=c(b),d=i[b.data(k)],d||(d=new s(b)),new n(e,d,a)}),c[g]("refresh"),this},disable:function(){return f._invoke(this,"disable")},enable:function(){return f._invoke(this,"enable")},destroy:function(){return f._invoke(this,"destroy")},prev:function(a,b){return f._traverse.call(this,a,b,function(b,a,c){if(a>0)return b.push(c[a-1])})},next:function(a,b){return f._traverse.call(this,a,b,function(c,a,b){if(a<b.length-1)return c.push(b[a+1])})},_traverse:function(a,b,h){var f,g;return a==null&&(a="vertical"),b==null&&(b=e),g=d.aggregate(b),f=[],this.each(function(){var b;return b=c.inArray(this,g[a]),h(f,b,g[a])}),this.pushStack(f)},_invoke:function(a,b){return a.each(function(){var a;return a=n.getWaypointsByElement(this),c.each(a,function(c,a){return a[b](),!0})}),this}},c.fn[j]=function(){var d,b;return b=arguments[0],d=2<=arguments.length?a.call(arguments,1):[],f[b]?f[b].apply(this,d):c.isFunction(b)?f.init.apply(this,arguments):c.isPlainObject(b)?f.init.apply(this,[null,b]):b?c.error("The "+b+" method does not exist in jQuery Waypoints."):c.error("jQuery Waypoints needs a callback function or handler option.")},c.fn[j].defaults={context:e,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},d={refresh:function(){return c.each(i,function(b,a){return a.refresh()})},viewportHeight:function(){var a;return(a=e.innerHeight)!=null?a:m.height()},aggregate:function(d){var b,a,e;return b=h,d&&(b=(e=i[c(d).data(k)])!=null?e.waypoints:void 0),!b?[]:(a={horizontal:[],vertical:[]},c.each(a,function(d,e){return c.each(b[d],function(b,a){return e.push(a)}),e.sort(function(a,b){return a.offset-b.offset}),a[d]=c.map(e,function(a){return a.element}),a[d]=c.unique(a[d])}),a)},above:function(a){return a==null&&(a=e),d._filter(a,"vertical",function(a,b){return b.offset<=a.oldScroll.y})},below:function(a){return a==null&&(a=e),d._filter(a,"vertical",function(a,b){return b.offset>a.oldScroll.y})},left:function(a){return a==null&&(a=e),d._filter(a,"horizontal",function(a,b){return b.offset<=a.oldScroll.x})},right:function(a){return a==null&&(a=e),d._filter(a,"horizontal",function(a,b){return b.offset>a.oldScroll.x})},enable:function(){return d._invoke("enable")},disable:function(){return d._invoke("disable")},destroy:function(){return d._invoke("destroy")},extendFn:function(a,b){return f[a]=b},_invoke:function(b){var a;return a=c.extend({},h.vertical,h.horizontal),c.each(a,function(c,a){return a[b](),!0})},_filter:function(d,e,f){var a,b;return a=i[c(d).data(k)],!a?[]:(b=[],c.each(a.waypoints[e],function(d,c){if(f(a,c))return b.push(c)}),b.sort(function(a,b){return a.offset-b.offset}),c.map(b,function(a){return a.element}))}},c[g]=function(){var c,b;return b=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],d[b]?d[b].apply(null,c):d.aggregate.call(null,b)},c[g].settings={resizeThrottle:100,scrollThrottle:30},m.load(function(){return c[g]("refresh")})})}).call(this)