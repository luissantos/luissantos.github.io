(function(a){a.fn.twentytwenty=function(b){var b=a.extend({default_offset_pct:.5,orientation:'horizontal',follow_mouse:!1},b);return this.each(function(){var f=b.default_offset_pct,c=a(this),e=b.orientation,q=e==='vertical'?'down':'left',o=e==='vertical'?'up':'right',d,p,g,h,m,n,k,l,i,j;c.wrap("<div class='twentytwenty-wrapper twentytwenty-"+e+"'></div>"),c.append("<div class='twentytwenty-overlay'></div>"),d=c.find("img:first"),p=c.find("img:last"),c.append("<div class='twentytwenty-handle'></div>"),g=c.find(".twentytwenty-handle"),g.append("<span class='twentytwenty-"+q+"-arrow'></span>"),g.append("<span class='twentytwenty-"+o+"-arrow'></span>"),c.addClass("twentytwenty-container"),d.addClass("twentytwenty-before"),p.addClass("twentytwenty-after"),h=c.find(".twentytwenty-overlay"),h.append("<div class='twentytwenty-before-label'></div>"),h.append("<div class='twentytwenty-after-label'></div>"),m=function(a){var b=d.width(),c=d.height();return{w:b+"px",h:c+"px",cw:a*b+"px",ch:a*c+"px"}},n=function(a){e==='vertical'?d.css("clip","rect(0,"+a.w+","+a.ch+",0)"):d.css("clip","rect(0,"+a.cw+","+a.h+",0)"),c.css("height",a.h)},k=function(b){var a=m(b);g.css(e==="vertical"?"top":"left",e==="vertical"?a.ch:a.cw),n(a)},l=function(a){c.hasClass("active")&&(f=e==='vertical'?(a.pageY-offsetY)/imgHeight:(a.pageX-i)/j,f<0&&(f=0),f>1&&(f=1),k(f))},a(window).on("resize.twentytwenty",function(a){k(f)}),i=0,j=0,g.on("movestart",function(a){(a.distX>a.distY&&a.distX<-a.distY||a.distX<a.distY&&a.distX>-a.distY)&&e!=='vertical'?a.preventDefault():(a.distX<a.distY&&a.distX<-a.distY||a.distX>a.distY&&a.distX>-a.distY)&&e==='vertical'&&a.preventDefault(),c.addClass("active"),i=c.offset().left,offsetY=c.offset().top,j=d.width(),imgHeight=d.height()}),g.on("moveend",function(a){c.removeClass("active")}),g.on("move",function(a){l(a)}),c.find("img").on("mousedown",function(a){a.preventDefault()}),b.follow_mouse&&(h.children().css('opacity','1'),c.on("mousemove touchmove",function(a){h.children().css('opacity','0'),c.addClass("active"),i=c.offset().left,offsetY=c.offset().top,j=d.width(),imgHeight=d.height(),l(a)}),c.on("mouseleave touchend",function(a){c.removeClass("active"),h.children().css('opacity','1')})),a(window).trigger("resize.twentytwenty")})}})(jQuery)